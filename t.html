<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelAdmin Pro - Hệ thống quản trị tour du lịch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        box-sizing: border-box;
      }

      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      * {
        font-family: "Inter", sans-serif;
      }

      .sidebar-item:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transform: translateX(4px);
        transition: all 0.3s ease;
      }

      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .dark-mode {
        background-color: #1a1a2e;
        color: #eee;
      }

      .dark-mode .bg-white {
        background-color: #16213e !important;
      }

      .dark-mode .text-gray-900 {
        color: #eee !important;
      }

      .dark-mode .text-gray-600 {
        color: #bbb !important;
      }

      .dark-mode .border-gray-200 {
        border-color: #374151 !important;
      }

      .notification-badge {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .status-pending {
        background: #fef3c7;
        color: #92400e;
      }
      .status-confirmed {
        background: #d1fae5;
        color: #065f46;
      }
      .status-cancelled {
        background: #fee2e2;
        color: #991b1b;
      }
      .status-completed {
        background: #dbeafe;
        color: #1e40af;
      }

      .tour-card {
        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
        border: 1px solid #e2e8f0;
      }

      .metric-card {
        background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%);
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      .status-filter.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
    </style>
  </head>
  <body class="bg-gray-50 transition-all duration-300">
    <!-- Header -->
    <header
      class="bg-white shadow-sm border-b border-gray-200 fixed w-full top-0 z-50"
    >
      <div class="flex items-center justify-between px-6 py-4">
        <div class="flex items-center space-x-4">
          <div class="gradient-bg p-2 rounded-lg">
            <i class="fas fa-map-marked-alt text-white text-xl"></i>
          </div>
          <h1 class="text-2xl font-bold text-gray-900">TravelAdmin Pro</h1>
        </div>

        <div class="flex items-center space-x-4">
          <!-- Search -->
          <div class="relative">
            <input
              type="text"
              placeholder="Tìm kiếm..."
              class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
          </div>

          <!-- Notifications -->
          <div class="relative">
            <button class="p-2 text-gray-600 hover:text-gray-900 relative">
              <i class="fas fa-bell text-xl"></i>
              <span
                class="notification-badge absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"
                >3</span
              >
            </button>
          </div>

          <!-- Dark Mode Toggle -->
          <button
            onclick="toggleDarkMode()"
            class="p-2 text-gray-600 hover:text-gray-900"
          >
            <i class="fas fa-moon text-xl"></i>
          </button>

          <!-- User Menu -->
          <div class="flex items-center space-x-3">
            <img
              src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23667eea'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16' font-weight='bold'%3EAD%3C/text%3E%3C/svg%3E"
              alt="Admin"
              class="w-10 h-10 rounded-full"
            />
            <div>
              <p class="text-sm font-medium text-gray-900">Admin User</p>
              <p class="text-xs text-gray-500">Quản trị viên</p>
            </div>
            <button
              onclick="logout()"
              class="p-2 text-gray-600 hover:text-red-600 transition-colors"
              title="Đăng xuất"
            >
              <i class="fas fa-sign-out-alt text-lg"></i>
            </button>
          </div>
        </div>
      </div>
    </header>

    <div class="flex pt-16">
      <!-- Sidebar -->
      <aside
        class="w-64 bg-white shadow-lg h-screen fixed left-0 overflow-y-auto"
      >
        <nav class="p-4 space-y-2">
          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer bg-gradient-to-r from-blue-500 to-purple-600 text-white"
            onclick="showSection('dashboard')"
          >
            <i class="fas fa-tachometer-alt mr-3"></i>
            Dashboard
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('tours')"
          >
            <i class="fas fa-route mr-3"></i>
            Quản lý Tour
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('bookings')"
          >
            <i class="fas fa-calendar-check mr-3"></i>
            Đơn đặt tour
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('customers')"
          >
            <i class="fas fa-users mr-3"></i>
            Khách hàng
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('staff')"
          >
            <i class="fas fa-user-tie mr-3"></i>
            Quản lý Nhân viên
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('analytics')"
          >
            <i class="fas fa-chart-line mr-3"></i>
            Báo cáo & Phân tích
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('partners')"
          >
            <i class="fas fa-handshake mr-3"></i>
            Đối tác
          </div>

          <div
            class="sidebar-item p-3 rounded-lg cursor-pointer text-gray-700 hover:text-white"
            onclick="showSection('settings')"
          >
            <i class="fas fa-cog mr-3"></i>
            Cài đặt
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 ml-64 p-6">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
          <div class="mb-6">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">
              Dashboard Tổng quan
            </h2>
            <p class="text-gray-600">
              Theo dõi hiệu suất kinh doanh và các chỉ số quan trọng
            </p>
          </div>

          <!-- Key Metrics -->
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
          >
            <div class="metric-card card-hover p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">
                    Doanh thu tháng
                  </p>
                  <p class="text-3xl font-bold text-gray-900">2.4B VNĐ</p>
                  <p class="text-sm text-green-600">
                    +12.5% so với tháng trước
                  </p>
                </div>
                <div class="bg-green-100 p-3 rounded-full">
                  <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                </div>
              </div>
            </div>

            <div class="metric-card card-hover p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">Đơn đặt tour</p>
                  <p class="text-3xl font-bold text-gray-900">1,247</p>
                  <p class="text-sm text-blue-600">+8.2% so với tháng trước</p>
                </div>
                <div class="bg-blue-100 p-3 rounded-full">
                  <i class="fas fa-calendar-check text-blue-600 text-xl"></i>
                </div>
              </div>
            </div>

            <div class="metric-card card-hover p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">Tỷ lệ lấp đầy</p>
                  <p class="text-3xl font-bold text-gray-900">87.3%</p>
                  <p class="text-sm text-orange-600">
                    +3.1% so với tháng trước
                  </p>
                </div>
                <div class="bg-orange-100 p-3 rounded-full">
                  <i class="fas fa-percentage text-orange-600 text-xl"></i>
                </div>
              </div>
            </div>

            <div class="metric-card card-hover p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">
                    Khách hàng mới
                  </p>
                  <p class="text-3xl font-bold text-gray-900">342</p>
                  <p class="text-sm text-purple-600">
                    +15.7% so với tháng trước
                  </p>
                </div>
                <div class="bg-purple-100 p-3 rounded-full">
                  <i class="fas fa-user-plus text-purple-600 text-xl"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Charts -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-sm">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">
                Doanh thu theo tháng
              </h3>
              <canvas id="revenueChart" width="400" height="200"></canvas>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">
                Tour phổ biến
              </h3>
              <canvas id="popularToursChart" width="400" height="200"></canvas>
            </div>
          </div>

          <!-- Recent Activities -->
          <div class="bg-white rounded-xl shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
              Hoạt động gần đây
            </h3>
            <div class="space-y-4">
              <div
                class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg"
              >
                <div class="bg-green-100 p-2 rounded-full">
                  <i class="fas fa-check text-green-600"></i>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-900">
                    Đơn đặt tour #TK2024001 đã được xác nhận
                  </p>
                  <p class="text-xs text-gray-500">2 phút trước</p>
                </div>
              </div>

              <div
                class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg"
              >
                <div class="bg-blue-100 p-2 rounded-full">
                  <i class="fas fa-plus text-blue-600"></i>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-900">
                    Tour mới "Hạ Long - Sapa 4N3Đ" đã được thêm
                  </p>
                  <p class="text-xs text-gray-500">15 phút trước</p>
                </div>
              </div>

              <div
                class="flex items-center space-x-4 p-3 bg-gray-50 rounded-lg"
              >
                <div class="bg-orange-100 p-2 rounded-full">
                  <i class="fas fa-exclamation-triangle text-orange-600"></i>
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-900">
                    Tour "Phú Quốc 3N2Đ" sắp hết chỗ (còn 3 chỗ)
                  </p>
                  <p class="text-xs text-gray-500">1 giờ trước</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Staff Management Section -->
        <div id="staff" class="section hidden">
          <div class="flex justify-between items-center mb-6">
            <div>
              <h2 class="text-3xl font-bold text-gray-900 mb-2">
                Quản lý Nhân viên
              </h2>
              <p class="text-gray-600">
                Theo dõi và quản lý thông tin nhân viên
              </p>
            </div>
            <div class="flex space-x-3">
              <button
                onclick="exportStaffData()"
                class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors"
              >
                <i class="fas fa-download mr-2"></i>Xuất Excel
              </button>
              <button
                onclick="showAddStaffModal()"
                class="gradient-bg text-white px-6 py-3 rounded-lg hover:opacity-90 transition-opacity"
              >
                <i class="fas fa-user-plus mr-2"></i>Thêm nhân viên
              </button>
            </div>
          </div>

          <!-- Staff Stats -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">
                    Tổng nhân viên
                  </p>
                  <p
                    class="text-2xl font-bold text-gray-900"
                    id="totalStaffCount"
                  >
                    24
                  </p>
                </div>
                <div class="bg-blue-100 p-3 rounded-full">
                  <i class="fas fa-users text-blue-600"></i>
                </div>
              </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">Đang làm việc</p>
                  <p
                    class="text-2xl font-bold text-gray-900"
                    id="activeStaffCount"
                  >
                    21
                  </p>
                </div>
                <div class="bg-green-100 p-3 rounded-full">
                  <i class="fas fa-user-check text-green-600"></i>
                </div>
              </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">Nghỉ phép</p>
                  <p class="text-2xl font-bold text-gray-900" id="onLeaveCount">
                    2
                  </p>
                </div>
                <div class="bg-yellow-100 p-3 rounded-full">
                  <i class="fas fa-user-clock text-yellow-600"></i>
                </div>
              </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-600">Hiệu suất TB</p>
                  <p
                    class="text-2xl font-bold text-gray-900"
                    id="avgPerformanceCount"
                  >
                    87.5%
                  </p>
                </div>
                <div class="bg-purple-100 p-3 rounded-full">
                  <i class="fas fa-chart-line text-purple-600"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Staff Filters -->
          <div class="bg-white p-4 rounded-xl shadow-sm mb-6">
            <div class="flex flex-wrap items-center justify-between gap-4">
              <!-- Status Filters -->
              <div class="flex space-x-2">
                <button
                  onclick="filterStaffByStatus('all')"
                  class="status-filter active px-4 py-2 rounded-lg text-sm font-medium transition-colors"
                >
                  Tất cả
                </button>
                <button
                  onclick="filterStaffByStatus('active')"
                  class="status-filter px-4 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors"
                >
                  Đang làm việc
                </button>
                <button
                  onclick="filterStaffByStatus('leave')"
                  class="status-filter px-4 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors"
                >
                  Nghỉ phép
                </button>
                <button
                  onclick="filterStaffByStatus('inactive')"
                  class="status-filter px-4 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors"
                >
                  Nghỉ việc
                </button>
              </div>

              <!-- Department Filter & Search -->
              <div class="flex space-x-3">
                <select
                  onchange="filterStaffByDepartment(this.value)"
                  class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                >
                  <option value="all">Tất cả phòng ban</option>
                  <option value="Kinh doanh">Kinh doanh</option>
                  <option value="Vận hành">Vận hành</option>
                  <option value="Marketing">Marketing</option>
                  <option value="Tài chính">Tài chính</option>
                  <option value="Nhân sự">Nhân sự</option>
                </select>

                <div class="relative">
                  <input
                    type="text"
                    id="staffSearchInput"
                    placeholder="Tìm kiếm nhân viên..."
                    class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                  <i
                    class="fas fa-search absolute left-3 top-3 text-gray-400"
                  ></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Staff Table -->
          <div class="bg-white rounded-xl shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Nhân viên
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Chức vụ
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Trạng thái
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ngày vào làm
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Lương
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Hiệu suất
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Thao tác
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="staffTableBody"
                  class="bg-white divide-y divide-gray-200"
                >
                  <!-- Staff data will be rendered here by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Other sections (tours, bookings, etc.) remain hidden for now -->
        <div id="tours" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Quản lý Tour</h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>

        <div id="bookings" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Đơn đặt tour</h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>

        <div id="customers" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Khách hàng</h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>

        <div id="analytics" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">
            Báo cáo & Phân tích
          </h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>

        <div id="partners" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Đối tác</h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>

        <div id="settings" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Cài đặt</h2>
          <p class="text-gray-600">Chức năng đang phát triển...</p>
        </div>
      </main>
    </div>

    <!-- Add Staff Modal -->
    <div
      id="addStaffModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center"
    >
      <div
        class="bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-screen overflow-y-auto"
      >
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold text-gray-900">
            Thêm nhân viên mới
          </h3>
          <button
            onclick="hideAddStaffModal()"
            class="text-gray-400 hover:text-gray-600"
          >
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <form id="addStaffForm" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Họ và tên</label
              >
              <input
                type="text"
                name="staffName"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                placeholder="Nhập họ và tên"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Email</label
              >
              <input
                type="email"
                name="staffEmail"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                placeholder="Nhập email"
                required
              />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Số điện thoại</label
              >
              <input
                type="tel"
                name="staffPhone"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                placeholder="Nhập số điện thoại"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Ngày vào làm</label
              >
              <input
                type="date"
                name="joinDate"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                required
              />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Chức vụ</label
              >
              <input
                type="text"
                name="staffPosition"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                placeholder="Nhập chức vụ"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Phòng ban</label
              >
              <select
                name="staffDepartment"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                required
              >
                <option value="">Chọn phòng ban</option>
                <option value="Kinh doanh">Kinh doanh</option>
                <option value="Vận hành">Vận hành</option>
                <option value="Marketing">Marketing</option>
                <option value="Tài chính">Tài chính</option>
                <option value="Nhân sự">Nhân sự</option>
              </select>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Lương cơ bản (VNĐ)</label
            >
            <input
              type="number"
              name="salary"
              class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
              placeholder="15000000"
              required
            />
          </div>

          <div class="flex justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="hideAddStaffModal()"
              class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300"
            >
              Hủy
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
            >
              Thêm nhân viên
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Staff data
      let staffData = [
        {
          id: 1,
          name: "Nguyễn Văn An",
          email: "nguyenvanan@company.com",
          phone: "0901234567",
          position: "Trưởng phòng Kinh doanh",
          department: "Kinh doanh",
          joinDate: "2020-03-15",
          salary: 25000000,
          status: "active",
          performance: 95,
        },
        {
          id: 2,
          name: "Trần Thị Bình",
          email: "tranthibinh@company.com",
          phone: "0912345678",
          position: "Nhân viên Marketing",
          department: "Marketing",
          joinDate: "2021-07-20",
          salary: 15000000,
          status: "leave",
          performance: 88,
        },
        {
          id: 3,
          name: "Lê Minh Cường",
          email: "leminhcuong@company.com",
          phone: "0923456789",
          position: "Nhân viên Vận hành",
          department: "Vận hành",
          joinDate: "2022-01-10",
          salary: 18000000,
          status: "active",
          performance: 92,
        },
        {
          id: 4,
          name: "Phạm Thị Hoa",
          email: "phamthihoa@company.com",
          phone: "0934567890",
          position: "Kế toán trưởng",
          department: "Tài chính",
          joinDate: "2019-11-05",
          salary: 22000000,
          status: "active",
          performance: 90,
        },
        {
          id: 5,
          name: "Vũ Minh Đức",
          email: "vuminhduc@company.com",
          phone: "0945678901",
          position: "Chuyên viên Nhân sự",
          department: "Nhân sự",
          joinDate: "2021-09-12",
          salary: 16000000,
          status: "leave",
          performance: 85,
        },
      ];

      let currentFilter = "all";
      let currentDepartmentFilter = "all";

      // Initialize the application
      document.addEventListener("DOMContentLoaded", function () {
        renderStaffTable();
        updateStaffStats();
        initializeCharts();

        // Add search functionality
        document
          .getElementById("staffSearchInput")
          .addEventListener("input", function (e) {
            searchStaff(e.target.value);
          });

        // Add staff form submission
        document
          .getElementById("addStaffForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            addNewStaff();
          });
      });

      // Show/Hide sections
      function showSection(sectionId) {
        // Hide all sections
        const sections = document.querySelectorAll(".section");
        sections.forEach((section) => section.classList.add("hidden"));

        // Show selected section
        document.getElementById(sectionId).classList.remove("hidden");

        // Update sidebar active state
        const sidebarItems = document.querySelectorAll(".sidebar-item");
        sidebarItems.forEach((item) => {
          item.classList.remove(
            "bg-gradient-to-r",
            "from-blue-500",
            "to-purple-600",
            "text-white"
          );
          item.classList.add("text-gray-700", "hover:text-white");
        });

        // Set active sidebar item
        event.target.classList.add(
          "bg-gradient-to-r",
          "from-blue-500",
          "to-purple-600",
          "text-white"
        );
        event.target.classList.remove("text-gray-700", "hover:text-white");
      }

      // Staff management functions
      function renderStaffTable() {
        const tbody = document.getElementById("staffTableBody");
        let filteredData = staffData;

        // Apply status filter
        if (currentFilter !== "all") {
          filteredData = filteredData.filter(
            (staff) => staff.status === currentFilter
          );
        }

        // Apply department filter
        if (currentDepartmentFilter !== "all") {
          filteredData = filteredData.filter(
            (staff) => staff.department === currentDepartmentFilter
          );
        }

        tbody.innerHTML = filteredData
          .map(
            (staff) => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <img class="h-10 w-10 rounded-full" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23${getRandomColor()}'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='14' font-weight='bold'%3E${getInitials(
              staff.name
            )}%3C/text%3E%3C/svg%3E" alt="">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${
                                  staff.name
                                }</div>
                                <div class="text-sm text-gray-500">${
                                  staff.email
                                }</div>
                                <div class="text-sm text-gray-500">${
                                  staff.phone
                                }</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${
                          staff.position
                        }</div>
                        <div class="text-sm text-gray-500">${
                          staff.department
                        }</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${getStatusClass(
                          staff.status
                        )}">
                            ${getStatusText(staff.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${formatDate(
                      staff.joinDate
                    )}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${formatCurrency(
                      staff.salary
                    )}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900">${
                              staff.performance
                            }%</div>
                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${
                                  staff.performance
                                }%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <button onclick="viewStaff(${
                          staff.id
                        })" class="text-blue-600 hover:text-blue-900">Xem</button>
                        <button onclick="editStaff(${
                          staff.id
                        })" class="text-green-600 hover:text-green-900">Sửa</button>
                        <button onclick="deleteStaff(${
                          staff.id
                        })" class="text-red-600 hover:text-red-900">Xóa</button>
                    </td>
                </tr>
            `
          )
          .join("");
      }

      function updateStaffStats() {
        const total = staffData.length;
        const active = staffData.filter((s) => s.status === "active").length;
        const onLeave = staffData.filter((s) => s.status === "leave").length;
        const avgPerformance = Math.round(
          staffData.reduce((sum, s) => sum + s.performance, 0) / total
        );

        document.getElementById("totalStaffCount").textContent = total;
        document.getElementById("activeStaffCount").textContent = active;
        document.getElementById("onLeaveCount").textContent = onLeave;
        document.getElementById("avgPerformanceCount").textContent =
          avgPerformance + "%";
      }

      function filterStaffByStatus(status) {
        currentFilter = status;

        // Update button states
        document.querySelectorAll(".status-filter").forEach((btn) => {
          btn.classList.remove("active");
          btn.classList.add("bg-gray-200", "text-gray-700");
        });

        event.target.classList.add("active");
        event.target.classList.remove("bg-gray-200", "text-gray-700");

        renderStaffTable();
      }

      function filterStaffByDepartment(department) {
        currentDepartmentFilter = department;
        renderStaffTable();
      }

      function searchStaff(query) {
        const tbody = document.getElementById("staffTableBody");
        let filteredData = staffData.filter(
          (staff) =>
            staff.name.toLowerCase().includes(query.toLowerCase()) ||
            staff.email.toLowerCase().includes(query.toLowerCase()) ||
            staff.position.toLowerCase().includes(query.toLowerCase()) ||
            staff.department.toLowerCase().includes(query.toLowerCase())
        );

        // Apply other filters
        if (currentFilter !== "all") {
          filteredData = filteredData.filter(
            (staff) => staff.status === currentFilter
          );
        }
        if (currentDepartmentFilter !== "all") {
          filteredData = filteredData.filter(
            (staff) => staff.department === currentDepartmentFilter
          );
        }

        tbody.innerHTML = filteredData
          .map(
            (staff) => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <img class="h-10 w-10 rounded-full" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23${getRandomColor()}'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='14' font-weight='bold'%3E${getInitials(
              staff.name
            )}%3C/text%3E%3C/svg%3E" alt="">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${
                                  staff.name
                                }</div>
                                <div class="text-sm text-gray-500">${
                                  staff.email
                                }</div>
                                <div class="text-sm text-gray-500">${
                                  staff.phone
                                }</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${
                          staff.position
                        }</div>
                        <div class="text-sm text-gray-500">${
                          staff.department
                        }</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${getStatusClass(
                          staff.status
                        )}">
                            ${getStatusText(staff.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${formatDate(
                      staff.joinDate
                    )}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${formatCurrency(
                      staff.salary
                    )}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900">${
                              staff.performance
                            }%</div>
                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${
                                  staff.performance
                                }%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <button onclick="viewStaff(${
                          staff.id
                        })" class="text-blue-600 hover:text-blue-900">Xem</button>
                        <button onclick="editStaff(${
                          staff.id
                        })" class="text-green-600 hover:text-green-900">Sửa</button>
                        <button onclick="deleteStaff(${
                          staff.id
                        })" class="text-red-600 hover:text-red-900">Xóa</button>
                    </td>
                </tr>
            `
          )
          .join("");
      }

      // Modal functions
      function showAddStaffModal() {
        document.getElementById("addStaffModal").classList.remove("hidden");
      }

      function hideAddStaffModal() {
        document.getElementById("addStaffModal").classList.add("hidden");
        document.getElementById("addStaffForm").reset();
      }

      function addNewStaff() {
        const formData = new FormData(document.getElementById("addStaffForm"));
        const newStaff = {
          id: staffData.length + 1,
          name: formData.get("staffName"),
          email: formData.get("staffEmail"),
          phone: formData.get("staffPhone"),
          position: formData.get("staffPosition"),
          department: formData.get("staffDepartment"),
          joinDate: formData.get("joinDate"),
          salary: parseInt(formData.get("salary")),
          status: "active",
          performance: Math.floor(Math.random() * 20) + 80, // Random performance 80-100%
        };

        staffData.push(newStaff);
        renderStaffTable();
        updateStaffStats();
        hideAddStaffModal();

        // Show success message
        alert("Thêm nhân viên thành công!");
      }

      // Staff actions
      function viewStaff(id) {
        const staff = staffData.find((s) => s.id === id);
        alert(
          `Xem chi tiết nhân viên: ${staff.name}\nChức vụ: ${staff.position}\nPhòng ban: ${staff.department}`
        );
      }

      function editStaff(id) {
        const staff = staffData.find((s) => s.id === id);
        const newName = prompt("Nhập tên mới:", staff.name);
        if (newName && newName !== staff.name) {
          staff.name = newName;
          renderStaffTable();
          alert("Cập nhật thông tin thành công!");
        }
      }

      function deleteStaff(id) {
        if (confirm("Bạn có chắc chắn muốn xóa nhân viên này?")) {
          staffData = staffData.filter((s) => s.id !== id);
          renderStaffTable();
          updateStaffStats();
          alert("Xóa nhân viên thành công!");
        }
      }

      function exportStaffData() {
        alert("Chức năng xuất Excel đang được phát triển!");
      }

      // Utility functions
      function getInitials(name) {
        return name
          .split(" ")
          .map((n) => n[0])
          .join("")
          .toUpperCase()
          .slice(0, 2);
      }

      function getRandomColor() {
        const colors = [
          "667eea",
          "10b981",
          "f59e0b",
          "ef4444",
          "8b5cf6",
          "06b6d4",
        ];
        return colors[Math.floor(Math.random() * colors.length)];
      }

      function getStatusClass(status) {
        switch (status) {
          case "active":
            return "bg-green-100 text-green-800";
          case "leave":
            return "bg-yellow-100 text-yellow-800";
          case "inactive":
            return "bg-red-100 text-red-800";
          default:
            return "bg-gray-100 text-gray-800";
        }
      }

      function getStatusText(status) {
        switch (status) {
          case "active":
            return "Đang làm việc";
          case "leave":
            return "Nghỉ phép";
          case "inactive":
            return "Nghỉ việc";
          default:
            return "Không xác định";
        }
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("vi-VN");
      }

      function formatCurrency(amount) {
        return new Intl.NumberFormat("vi-VN", {
          style: "currency",
          currency: "VND",
        }).format(amount);
      }

      // Other utility functions
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
      }

      function logout() {
        if (confirm("Bạn có chắc chắn muốn đăng xuất?")) {
          alert("Đăng xuất thành công!");
        }
      }

      // Initialize charts
      function initializeCharts() {
        // Revenue Chart
        const revenueCtx = document.getElementById("revenueChart");
        if (revenueCtx) {
          new Chart(revenueCtx, {
            type: "line",
            data: {
              labels: ["T1", "T2", "T3", "T4", "T5", "T6"],
              datasets: [
                {
                  label: "Doanh thu (tỷ VNĐ)",
                  data: [1.8, 2.1, 1.9, 2.4, 2.2, 2.4],
                  borderColor: "#667eea",
                  backgroundColor: "rgba(102, 126, 234, 0.1)",
                  tension: 0.4,
                },
              ],
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  display: false,
                },
              },
              scales: {
                y: {
                  beginAtZero: true,
                },
              },
            },
          });
        }

        // Popular Tours Chart
        const toursCtx = document.getElementById("popularToursChart");
        if (toursCtx) {
          new Chart(toursCtx, {
            type: "doughnut",
            data: {
              labels: ["Hạ Long - Sapa", "Phú Quốc", "Đà Nẵng - Hội An"],
              datasets: [
                {
                  data: [35, 30, 25],
                  backgroundColor: ["#667eea", "#10b981", "#f59e0b"],
                },
              ],
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  position: "bottom",
                },
              },
            },
          });
        }
      }
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'98d3b0e14253ddc3',t:'MTc2MDI0MTYzMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
