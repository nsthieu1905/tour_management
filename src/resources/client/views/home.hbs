{{!-- Search --}}
<section
  class="home-hero text-white py-20 bg-cover bg-center bg-no-repeat relative overflow-hidden"
  style="background-image: url('images/background_1.jpg')"
>
  <div
    class="home-hero__inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"
  >
    <h1 class="text-5xl font-bold mb-6">Khám phá thế giới với TravelSmart</h1>
    <p class="text-xl mb-12 opacity-90">
      Tìm kiếm tour hoàn hảo với công nghệ AI và trải nghiệm cá nhân hóa
    </p>

    <!-- Smart Search Box -->
    <div
      class="max-w-4xl mx-auto bg-white rounded-2xl p-6 shadow-lg border border-gray-200"
    >
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex-1">
          <div class="relative">
            <input
              type="text"
              id="aiSearch"
              placeholder="Tôi muốn đi du lịch..."
              class="w-full px-4 py-3 text-gray-700 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white"
            />
            <button
              id="voiceSearch"
              class="absolute right-3 top-3 text-indigo-600 hover:text-indigo-800 voice-search"
            >
              <i class="fas fa-microphone text-xl"></i>
            </button>
          </div>
        </div>

        <div class="flex gap-2">
          <select
            class="px-4 py-3 text-gray-700 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white"
          >
            <option>Tất cả dịch vụ</option>
            <option>Tour trọn gói</option>
            <option>Khách sạn</option>
            <option>Vé máy bay</option>
            <option>Trải nghiệm</option>
          </select>

          <button
            id="homeSearchBtn"
            class="bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-colors"
          >
            <i class="fas fa-search mr-2"></i>Tìm kiếm
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Tours với Comparison -->
<section class="py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-12">
      <h2 class="text-3xl font-bold text-gray-900">Danh sách tours</h2>
      <div class="flex gap-2">
        <button
          id="compareBtn"
          class="bg-white text-indigo-700 px-4 py-2 rounded-xl border border-indigo-200 hover:bg-indigo-50 transition-colors"
        >
          <i class="fas fa-balance-scale mr-2"></i>So sánh (0)
        </button>
      </div>
    </div>

    {{#if categoriesWithTours}}
    <div class="category-sections">
      {{#each categoriesWithTours}}
      <div class="category-section-wrap">
        <div
          class="category-section-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"
        >
          <div class="mb-6">
            <h3 class="text-2xl font-bold text-gray-900">{{name}}</h3>
            {{#if description}}
            <p class="text-sm text-gray-600 mt-1">{{description}}</p>
            {{/if}}
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {{#each tours}}
            <div
              class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover tour-card"
            >
              <div class="relative">
                <div class="relative overflow-hidden h-48 bg-gray-200">
                  <img
                    src="{{thumbnail images}}"
                    alt="{{name}}"
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                  />
                  <div class="absolute top-4 left-4">
                    <span class="tour-badge {{badgeClass tourType}}">
                      <i class="fas {{badgeIcon tourType}}"></i>
                      {{tourType}}
                    </span>
                  </div>
                  <div class="absolute top-4 right-4 flex gap-2">
                    <input
                      type="checkbox"
                      class="compare-checkbox hidden"
                      data-tour="{{_id}}"
                    />
                    <button
                      onclick="toggleCompare(this, '{{_id}}')"
                      class="bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors"
                    >
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="p-6">
                <div class="flex justify-between items-start mb-2">
                  <h3
                    class="text-xl font-semibold text-gray-900 line-clamp-3 min-h-[5.25rem]"
                    title="{{name}}"
                  >
                    {{name}}
                  </h3>
                </div>

                <div class="tour-card__footer">
                  <p class="text-gray-600 mb-4 text-sm">
                    {{duration.days}} ngày {{duration.nights}} đêm
                  </p>

                  <div class="flex items-end justify-between mb-4 meta-row">
                    <div class="text-2xl font-bold text-indigo-600">
                      {{formatPrice price}} VND
                    </div>
                    <div class="flex items-center">
                      <i class="fas fa-star text-yellow-400"></i>
                      <span class="ml-1 text-sm text-gray-600"
                        >{{rating.average}} ({{rating.count}})</span
                      >
                    </div>
                  </div>

                  <button
                    class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors"
                    onclick="window.location.href='/tours/{{slug}}'"
                  >
                    Xem chi tiết
                  </button>
                </div>
              </div>
            </div>
            {{/each}}
          </div>

          <div class="flex justify-center mt-8">
            <button
              class="bg-white border border-indigo-600 text-indigo-600 px-6 py-2 rounded-lg hover:bg-indigo-50 transition-colors font-semibold"
              onclick="window.location.href='/tours?category={{slug}}'"
            >
              Xem thêm
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
    {{else}} {{#if tours}}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{#each tours}}
      <div
        class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover tour-card"
      >
        <div class="relative">
          <div class="relative overflow-hidden h-48 bg-gray-200">
            <img
              src="{{thumbnail images}}"
              alt="{{name}}"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
            />
            <div class="absolute top-4 left-4">
              <span class="tour-badge {{badgeClass tourType}}">
                <i class="fas {{badgeIcon tourType}}"></i>
                {{tourType}}
              </span>
            </div>
            <div class="absolute top-4 right-4 flex gap-2">
              <input
                type="checkbox"
                class="compare-checkbox hidden"
                data-tour="{{_id}}"
              />
              <button
                onclick="toggleCompare(this, '{{_id}}')"
                class="bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="p-6">
          <div class="flex justify-between items-start mb-2">
            <h3
              class="text-xl font-semibold text-gray-900 line-clamp-3 min-h-[5.25rem]"
              title="{{name}}"
            >
              {{name}}
            </h3>
          </div>

          <div class="tour-card__footer">
            <p class="text-gray-600 mb-4 text-sm">
              {{duration.days}} ngày {{duration.nights}} đêm
            </p>

            <div class="flex items-end justify-between mb-4 meta-row">
              <div class="text-2xl font-bold text-indigo-600">
                {{formatPrice price}} VND
              </div>
              <div class="flex items-center">
                <i class="fas fa-star text-yellow-400"></i>
                <span class="ml-1 text-sm text-gray-600"
                  >{{rating.average}} ({{rating.count}})</span
                >
              </div>
            </div>

            <button
              class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors"
              onclick="window.location.href='/tours/{{slug}}'"
            >
              Xem chi tiết
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <div class="flex justify-center mt-10">
      <button
        class="bg-white border border-indigo-600 text-indigo-600 px-8 py-3 rounded-lg hover:bg-indigo-50 transition-colors font-semibold"
        onclick="window.location.href='/tours'"
      >
        Xem thêm tours
      </button>
    </div>
    {{else}}
    <div class="text-center py-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">Chưa có tour</h2>
      <p class="text-gray-600 mb-6">
        Vui lòng quay lại sau hoặc thử tìm kiếm tour khác.
      </p>
      <a
        href="/"
        class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors font-semibold"
      >
        <i class="fas fa-search mr-2"></i>Tìm tours
      </a>
    </div>
    {{/if}} {{/if}}
  </div>
</section>

<!-- Comparison Modal -->
<div id="comparisonModal" class="modal">
  <div
    class="bg-white rounded-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto"
  >
    <div class="p-6 border-b">
      <div class="flex justify-between items-center">
        <h2 class="text-2xl font-bold">So sánh tours</h2>
        <button
          onclick="closeComparison()"
          class="text-gray-500 hover:text-gray-700"
        >
          <i class="fas fa-times text-2xl"></i>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div
        id="comparisonContent"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      >
        <!-- Comparison cards will be inserted here -->
      </div>
    </div>
  </div>
</div>

<!-- Floating Action Buttons -->

<script type="module" src="/client/js/home.js"></script>
