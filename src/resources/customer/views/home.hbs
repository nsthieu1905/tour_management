{{!-- Search --}}
<section
  class="home-hero text-white py-20 bg-cover bg-center bg-no-repeat relative overflow-hidden"
  style="background-image: url('images/background_1.jpg')"
>
  <div
    class="home-hero__inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"
  >
    <h1 class="text-5xl font-bold mb-6">Khám phá thế giới với TravelSmart</h1>
    <p class="text-xl mb-12 opacity-90">
      Tìm kiếm tour hoàn hảo với công nghệ AI và trải nghiệm cá nhân hóa
    </p>

    <!-- Smart Search Box -->
    <div
      class="max-w-4xl mx-auto bg-white rounded-2xl p-6 shadow-lg border border-gray-200"
    >
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex-1">
          <div class="relative">
            <input
              type="text"
              id="aiSearch"
              placeholder="Tôi muốn đi du lịch..."
              class="w-full px-4 py-3 text-gray-700 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white"
            />
            <button
              id="voiceSearch"
              class="absolute right-3 top-3 text-indigo-600 hover:text-indigo-800 voice-search"
            >
              <i class="fas fa-microphone text-xl"></i>
            </button>
          </div>
        </div>

        <div class="flex gap-2">
          <select
            class="px-4 py-3 text-gray-700 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white"
          >
            <option>Tất cả dịch vụ</option>
            <option>Tour trọn gói</option>
            <option>Khách sạn</option>
            <option>Vé máy bay</option>
            <option>Trải nghiệm</option>
          </select>

          <button
            id="homeSearchBtn"
            class="bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-colors"
          >
            <i class="fas fa-search mr-2"></i>Tìm kiếm
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-10 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
        <div
          class="w-12 h-12 rounded-xl bg-indigo-50 text-indigo-700 flex items-center justify-center mb-4"
        >
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="text-lg font-semibold text-gray-900">Đặt tour an toàn</div>
        <div class="text-sm text-gray-600 mt-1">
          Xác nhận minh bạch, hỗ trợ nhanh và theo dõi đơn dễ dàng.
        </div>
      </div>

      <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
        <div
          class="w-12 h-12 rounded-xl bg-sky-50 text-sky-700 flex items-center justify-center mb-4"
        >
          <i class="fas fa-route"></i>
        </div>
        <div class="text-lg font-semibold text-gray-900">Lịch trình tối ưu</div>
        <div class="text-sm text-gray-600 mt-1">
          Gợi ý hành trình hợp lý, tiết kiệm thời gian, trải nghiệm trọn vẹn.
        </div>
      </div>

      <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
        <div
          class="w-12 h-12 rounded-xl bg-amber-50 text-amber-700 flex items-center justify-center mb-4"
        >
          <i class="fas fa-headset"></i>
        </div>
        <div class="text-lg font-semibold text-gray-900">Hỗ trợ 24/7</div>
        <div class="text-sm text-gray-600 mt-1">
          Tư vấn tận tâm trước, trong và sau chuyến đi.
        </div>
      </div>
    </div>
  </div>
</section>

<section class="home-about py-12 bg-slate-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
      <div>
        <h2 class="text-3xl font-bold text-gray-900">Về TravelSmart</h2>
        <p class="text-gray-600 mt-3 leading-relaxed">
          TravelSmart là nền tảng giúp bạn tìm tour phù hợp nhanh hơn: tìm kiếm,
          lọc theo nhu cầu và so sánh các lựa chọn ngay trên một màn hình.
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <a
            href="/tours"
            class="inline-flex items-center gap-2 bg-indigo-600 text-white px-5 py-3 rounded-xl hover:bg-indigo-700 transition-colors font-semibold"
          >
            <i class="fas fa-compass"></i>
            Khám phá tours
          </a>
          <a
            href="/favorites"
            class="inline-flex items-center gap-2 bg-white border border-gray-200 text-gray-800 px-5 py-3 rounded-xl hover:bg-gray-50 transition-colors font-semibold"
          >
            <i class="fas fa-heart"></i>
            Yêu thích
          </a>
        </div>

        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
          <div class="flex items-start gap-2 text-gray-700">
            <i class="fas fa-check text-indigo-600 mt-0.5"></i>
            <div>Tìm kiếm nhanh theo điểm đến, tên tour</div>
          </div>
          <div class="flex items-start gap-2 text-gray-700">
            <i class="fas fa-check text-indigo-600 mt-0.5"></i>
            <div>Bộ lọc rõ ràng, dễ chọn</div>
          </div>
          <div class="flex items-start gap-2 text-gray-700">
            <i class="fas fa-check text-indigo-600 mt-0.5"></i>
            <div>So sánh tối đa 3 tour cùng lúc</div>
          </div>
          <div class="flex items-start gap-2 text-gray-700">
            <i class="fas fa-check text-indigo-600 mt-0.5"></i>
            <div>Giao diện gọn, hiện đại</div>
          </div>
        </div>
      </div>

      <div>
        <div id="homeBannerSlider" class="home-slider">
          <div class="home-slider__viewport">
            <div class="home-slider__track">
              <div class="home-slider__item">
                <div class="home-slider__placeholder">
                  <i class="far fa-image"></i>
                </div>
                <img
                  class="home-slider__img"
                  data-banner="1"
                  alt="Banner 1"
                  loading="lazy"
                />
              </div>
              <div class="home-slider__item">
                <div class="home-slider__placeholder">
                  <i class="far fa-image"></i>
                </div>
                <img
                  class="home-slider__img"
                  data-banner="2"
                  alt="Banner 2"
                  loading="lazy"
                />
              </div>
              <div class="home-slider__item">
                <div class="home-slider__placeholder">
                  <i class="far fa-image"></i>
                </div>
                <img
                  class="home-slider__img"
                  data-banner="3"
                  alt="Banner 3"
                  loading="lazy"
                />
              </div>
              <div class="home-slider__item">
                <div class="home-slider__placeholder">
                  <i class="far fa-image"></i>
                </div>
                <img
                  class="home-slider__img"
                  data-banner="4"
                  alt="Banner 4"
                  loading="lazy"
                />
              </div>
              <div class="home-slider__item">
                <div class="home-slider__placeholder">
                  <i class="far fa-image"></i>
                </div>
                <img
                  class="home-slider__img"
                  data-banner="5"
                  alt="Banner 5"
                  loading="lazy"
                />
              </div>
            </div>
          </div>

          <button
            type="button"
            class="home-slider__nav home-slider__prev"
            aria-label="Ảnh trước"
          >
            <i class="fas fa-chevron-left"></i>
          </button>
          <button
            type="button"
            class="home-slider__nav home-slider__next"
            aria-label="Ảnh tiếp theo"
          >
            <i class="fas fa-chevron-right"></i>
          </button>

          <div class="home-slider__dots" aria-label="Chọn ảnh">
            <button
              type="button"
              class="home-slider__dot"
              data-slide="0"
              aria-label="Ảnh 1"
            ></button>
            <button
              type="button"
              class="home-slider__dot"
              data-slide="1"
              aria-label="Ảnh 2"
            ></button>
            <button
              type="button"
              class="home-slider__dot"
              data-slide="2"
              aria-label="Ảnh 3"
            ></button>
            <button
              type="button"
              class="home-slider__dot"
              data-slide="3"
              aria-label="Ảnh 4"
            ></button>
            <button
              type="button"
              class="home-slider__dot"
              data-slide="4"
              aria-label="Ảnh 5"
            ></button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Tours với Comparison -->
<section class="py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="mb-10"></div>

    {{#if categoriesWithTours}}
    <div class="category-sections">
      {{#each categoriesWithTours}}
      <div class="category-section-wrap">
        <div
          class="category-section-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"
        >
          <div class="mb-6">
            <h3 class="text-2xl font-bold text-gray-900">{{name}}</h3>
            {{#if description}}
            <p class="text-sm text-gray-600 mt-1">{{description}}</p>
            {{/if}}
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {{#each tours}}
            <div
              class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover tour-card"
            >
              <div class="relative">
                <div class="relative overflow-hidden h-48 bg-gray-200">
                  <img
                    src="{{thumbnail images}}"
                    alt="{{name}}"
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                  />
                  <div class="absolute top-4 left-4">
                    <span class="tour-badge {{badgeClass tourType}}">
                      <i class="fas {{badgeIcon tourType}}"></i>
                      {{tourType}}
                    </span>
                  </div>
                  <div class="absolute top-4 right-4 flex gap-2">
                    <input
                      type="checkbox"
                      class="compare-checkbox hidden"
                      data-tour="{{_id}}"
                    />
                    <button
                      onclick="toggleCompare(this, '{{_id}}')"
                      class="bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors"
                    >
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="p-6">
                <div class="flex justify-between items-start mb-2">
                  <h3
                    class="text-xl font-semibold text-gray-900 line-clamp-3 min-h-[5.25rem]"
                    title="{{name}}"
                  >
                    {{name}}
                  </h3>
                </div>

                <div class="tour-card__footer">
                  <p class="text-gray-600 mb-4 text-sm">
                    {{duration.days}} ngày {{duration.nights}} đêm
                  </p>

                  <div class="flex items-end justify-between mb-4 meta-row">
                    <div class="text-2xl font-bold text-indigo-600">
                      {{formatPrice price}} VND
                    </div>
                    <div class="flex items-center">
                      <i class="fas fa-star text-yellow-400"></i>
                      <span class="ml-1 text-sm text-gray-600"
                        >{{rating.average}} ({{rating.count}})</span
                      >
                    </div>
                  </div>

                  <button
                    class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors"
                    onclick="window.location.href='/tours/{{slug}}'"
                  >
                    Xem chi tiết
                  </button>
                </div>
              </div>
            </div>
            {{/each}}
          </div>

          <div class="flex justify-center mt-8">
            <button
              class="bg-white border border-indigo-600 text-indigo-600 px-6 py-2 rounded-lg hover:bg-indigo-50 transition-colors font-semibold"
              onclick="window.location.href='/tours?category={{slug}}'"
            >
              Xem thêm
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
    {{else}} {{#if tours}}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{#each tours}}
      <div
        class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover tour-card"
      >
        <div class="relative">
          <div class="relative overflow-hidden h-48 bg-gray-200">
            <img
              src="{{thumbnail images}}"
              alt="{{name}}"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
            />
            <div class="absolute top-4 left-4">
              <span class="tour-badge {{badgeClass tourType}}">
                <i class="fas {{badgeIcon tourType}}"></i>
                {{tourType}}
              </span>
            </div>
            <div class="absolute top-4 right-4 flex gap-2">
              <input
                type="checkbox"
                class="compare-checkbox hidden"
                data-tour="{{_id}}"
              />
              <button
                onclick="toggleCompare(this, '{{_id}}')"
                class="bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="p-6">
          <div class="flex justify-between items-start mb-2">
            <h3
              class="text-xl font-semibold text-gray-900 line-clamp-3 min-h-[5.25rem]"
              title="{{name}}"
            >
              {{name}}
            </h3>
          </div>

          <div class="tour-card__footer">
            <p class="text-gray-600 mb-4 text-sm">
              {{duration.days}} ngày {{duration.nights}} đêm
            </p>

            <div class="flex items-end justify-between mb-4 meta-row">
              <div class="text-2xl font-bold text-indigo-600">
                {{formatPrice price}} VND
              </div>
              <div class="flex items-center">
                <i class="fas fa-star text-yellow-400"></i>
                <span class="ml-1 text-sm text-gray-600"
                  >{{rating.average}} ({{rating.count}})</span
                >
              </div>
            </div>

            <button
              class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors"
              onclick="window.location.href='/tours/{{slug}}'"
            >
              Xem chi tiết
            </button>
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <div class="flex justify-center mt-10">
      <button
        class="bg-white border border-indigo-600 text-indigo-600 px-8 py-3 rounded-lg hover:bg-indigo-50 transition-colors font-semibold"
        onclick="window.location.href='/tours'"
      >
        Xem thêm tours
      </button>
    </div>
    {{else}}
    <div class="text-center py-12">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">Chưa có tour</h2>
      <p class="text-gray-600 mb-6">
        Vui lòng quay lại sau hoặc thử tìm kiếm tour khác.
      </p>
      <a
        href="/"
        class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors font-semibold"
      >
        <i class="fas fa-search mr-2"></i>Tìm tours
      </a>
    </div>
    {{/if}} {{/if}}
  </div>
</section>

<button
  id="compareFloatingBtn"
  type="button"
  class="compare-fab compare-fab--hidden"
  aria-label="So sánh tours"
>
  <span class="compare-fab__icon"><i class="fas fa-balance-scale"></i></span>
  <span class="compare-fab__text">So sánh</span>
  <span id="compareFloatingCount" class="compare-fab__count">0</span>
</button>

<!-- Comparison Modal -->
<div id="comparisonModal" class="modal">
  <div
    class="bg-white rounded-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto"
  >
    <div class="p-6 border-b">
      <div class="flex justify-between items-center">
        <h2 class="text-2xl font-bold">So sánh tours</h2>
        <button
          onclick="closeComparison()"
          class="text-gray-500 hover:text-gray-700"
        >
          <i class="fas fa-times text-2xl"></i>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div
        id="comparisonContent"
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      >
        <!-- Comparison cards will be inserted here -->
      </div>
    </div>
  </div>
</div>

<!-- Floating Action Buttons -->

<script type="module" src="/customer/js/home.js"></script>
