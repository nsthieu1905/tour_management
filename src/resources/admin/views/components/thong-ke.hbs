<div class="flex pt-16">
  <main class="flex-1 ml-64 p-6">
    <!-- Analytics Section -->
    <div id="analytics" class="section">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Thống kê</h2>

        </div>
        <div class="flex space-x-3">
          <select
            name="timeRange"
            class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
          >
            <option value="30" {{#if (eq selectedDays 30)}}selected{{/if}}>30 ngày qua</option>
            <option value="90" {{#if (eq selectedDays 90)}}selected{{/if}}>90 ngày qua</option>
            <option value="180" {{#if (eq selectedDays 180)}}selected{{/if}}>6 tháng qua</option>
            <option value="365" {{#if (eq selectedDays 365)}}selected{{/if}}>1 năm qua</option>
          </select>
          <button
            class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600"
          >
            <i class="fas fa-download mr-2"></i>Xuất báo cáo
          </button>
        </div>
      </div>

      <!-- Analytics Cards - 4 chỉ số -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Doanh thu trung bình/ngày -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">
                Doanh thu TB/ngày
              </p>
              <p id="avgDailyRevenue" class="text-2xl font-bold text-gray-900">
                0 VNĐ
              </p>
              <p class="text-sm text-green-600">Từ dữ liệu thực</p>
            </div>
            <div class="bg-green-100 p-3 rounded-full">
              <i class="fas fa-chart-line text-green-600"></i>
            </div>
          </div>
        </div>

        <!-- Giá trị đơn hàng TB -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">
                Giá trị đơn hàng TB
              </p>
              <p id="avgOrderValue" class="text-2xl font-bold text-gray-900">
                0 VNĐ
              </p>
              <p class="text-sm text-orange-600">Trung bình/đơn</p>
            </div>
            <div class="bg-orange-100 p-3 rounded-full">
              <i class="fas fa-money-bill-wave text-orange-600"></i>
            </div>
          </div>
        </div>

        <!-- Tổng doanh thu -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Tổng doanh thu</p>
              <p id="totalRevenue" class="text-2xl font-bold text-gray-900">
                0 VNĐ
              </p>
              <p class="text-sm text-blue-600">Khoảng thời gian</p>
            </div>
            <div class="bg-blue-100 p-3 rounded-full">
              <i class="fas fa-dollar-sign text-blue-600"></i>
            </div>
          </div>
        </div>

        <!-- Tỷ lệ đặt lại -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Tỷ lệ đặt lại</p>
              <p id="repeatRate" class="text-2xl font-bold text-gray-900">
                0%
              </p>
              <p class="text-sm text-purple-600">Khách quay lại</p>
            </div>
            <div class="bg-purple-100 p-3 rounded-full">
              <i class="fas fa-redo text-purple-600"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Grid - 3 Charts in one row -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Xu hướng đặt tour theo mùa -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">
            Xu hướng đặt tour theo mùa
          </h3>
          <div style="position: relative; height: 300px">
            <canvas id="bookingTrendsChart"></canvas>
          </div>
        </div>

        <!-- Tour Type Distribution Chart -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">
            Phân loại tour
          </h3>
          <div style="position: relative; height: 300px">
            <canvas id="tourTypeChart"></canvas>
          </div>
        </div>

        <!-- Booking Status Distribution Chart -->
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">
            Trạng thái đơn đặt
          </h3>
          <div style="position: relative; height: 300px">
            <canvas id="bookingStatusChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Performance Table -->
      <div class="bg-white rounded-xl shadow-sm p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">
          Hiệu suất tour theo tháng
        </h3>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50">
              <tr>
                <th
                  class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
                >
                  Tour
                </th>
                <th
                  class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
                >
                  Đã bán
                </th>
                <th
                  class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
                >
                  Doanh thu
                </th>
                <th
                  class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
                >
                  Tỷ lệ lấp đầy
                </th>
                <th
                  class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
                >
                  Xu hướng
                </th>
              </tr>
            </thead>
            <tbody id="tourPerformanceTable" class="divide-y divide-gray-200">
              <!-- Dynamic content -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
</div>

<script>
  // Embed statistics data from server
  window.statisticsData = {{{statisticsData}}};
</script>

<script type="module" src="/admin/js/thong-ke.js"></script>